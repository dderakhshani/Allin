<div class="flex h-full">
    <!-- Sidebar -->
    <aside class="flex-none menu-background" [class.compact]="isCompact">
        <p-toolbar class="toolbar">
            <ng-template #start>
                <img src="svgs/logo.svg" class="mx-3 size-10">
                <h4 *ngIf="!isCompact" class="app-title m-0">Allin</h4>
            </ng-template>
        </p-toolbar>

        <app-menu [menuItems]="menuItems" [compact]="isCompact" (onItemSelected)="openTab($event)"></app-menu>
    </aside>

    <!-- Main Content -->
    <div class="flex flex-col flex-grow">
        <!-- Toolbar -->
        <header class="flex-none shadow">
            <p-toolbar class="toolbar ">
                <ng-template #start>
                    <p-button class="me-2" type="button" icon="pi pi-bars" variant="text"
                        (click)="toggleDrawer()"></p-button>
                </ng-template>
                <ng-template #center>

                </ng-template>
                <ng-template #end>

                    <p-overlaybadge class="me-5">
                        <i class="pi pi-expand" style="font-size: 1.5rem"></i>
                    </p-overlaybadge>

                    <p-overlaybadge value="2" class="me-5">
                        <i class="pi pi-bell" style="font-size: 1.5rem"></i>
                    </p-overlaybadge>

                    <p-overlaybadge value="0" class="me-5">
                        <i class="pi pi-cog" style="font-size: 1.5rem"></i>
                    </p-overlaybadge>

                    <p-togglebutton (onChange)="darkChanged($event)" [(ngModel)]="dark" offIcon="pi pi-moon"
                        onIcon="pi pi-sun" onLabel="Light" offLabel="Dark" styleClass="w-24" />
                </ng-template>
            </p-toolbar>
        </header>

        <!-- Main Content Area -->
        <main class="flex-grow ">
            <p-tabs [value]="activeTab">
                <p-tablist>
                    @for (tab of openedTabs; track tab.routerLink) {
                    <p-tab class="tab-header" [value]="tab.routerLink">
                        <i class="material-symbols-outlined mr-4">{{tab.icon}}</i>
                        {{ tab.label }}

                        <p-button type="button" class="me-2" icon="pi pi-times" variant="text" [rounded]="true"
                            severity="secondary"></p-button>
                    </p-tab>
                    }
                </p-tablist>
                <p-tabpanels>
                    @for (tab of openedTabs; track tab.routerLink) {
                    <p-tabpanel [value]="tab.routerLink">
                        <router-outlet></router-outlet>
                    </p-tabpanel>
                    }
                </p-tabpanels>
            </p-tabs>
        </main>
    </div>
</div>





<!-- Sidebar Menu -->
<!-- <p-drawer [(visible)]="mobileMenuVisible" [modal]="true" [position]="'left'" *ngIf="isMobile">
        <div *ngFor="let item of menuItems" class="menu-item" (onItemSelected)="openTab(item)">
            <i [class]="item.icon"></i>
            <span>{{ item.label }}</span>
        </div>
    </p-drawer> -->